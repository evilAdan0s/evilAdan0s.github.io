<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>我的OSCE3之路——OSED | 白袍的小行星</title>
<link rel="shortcut icon" href="https://red-team.tips/favicon.ico?v=1710333081950">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://red-team.tips/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="我的OSCE3之路——OSED | 白袍的小行星 - Atom Feed" href="https://red-team.tips/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="前言
OSED对应的课程为EXP-301(Windows User Mode Exploit Development)，从名字就可以看出，这是一门Windows平台漏洞利用的课程，简单来说就是Windows Pwn.
EXP-301的主要内..." />
    <meta name="keywords" content="OffSec" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://red-team.tips">
  <img class="avatar" src="https://red-team.tips/images/avatar.png?v=1710333081950" alt="">
  </a>
  <h1 class="site-title" data-text=白袍的小行星>
    白袍的小行星
  </h1>
  <p class="site-description">
    <strong>Once a hacker, always a hacker!</strong>
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
      
        <a href="/post/friends" class="menu">
          友链
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/evilAdan0s" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
        <a href="https://twitter.com/Adan0s1" target="_blank">
          <i class="ri-twitter-line"></i>
        </a>
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              我的OSCE3之路——OSED
            </h2>
            <div class="post-info">
              <span>
                2024-03-13
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://red-team.tips/tag/omhFdQrox/" class="post-tag">
                  # OffSec
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <h1 id="前言">前言</h1>
<p><code>OSED</code>对应的课程为<code>EXP-301(Windows User Mode Exploit Development)</code>，从名字就可以看出，这是一门Windows平台漏洞利用的课程，简单来说就是Windows Pwn.</p>
<p><code>EXP-301</code>的主要内容是Windows下32位的漏洞利用，很多人认为在现在的环境下还教32位有点过时，但这门课并不是进阶课程，而是Pwn的入门课程，所以用32位其实没什么不妥，真正高阶的<code>Exploit Development</code>课程应该看<code>EXP-401</code>.</p>
<p>官方给的前置技能要求包括：</p>
<ul>
<li>熟悉调试器</li>
<li>熟悉32位漏洞利用的基本概念</li>
<li>能够熟练编写Python3代码</li>
<li>能够基本阅读和理解C代码</li>
<li>能够基本阅读和理解基础的汇编代码</li>
</ul>
<h1 id="考试规则">考试规则</h1>
<p><code>OSED</code>考试同样为48小时，同样需要监考和提交报告。考试总共会出现3道题目，其中两道为30分，一道为40分，获得60分即可通过。</p>
<p>考试中不能使用商业工具、AI聊天机器人（chatgpt类），并且必须使用<code>IDA Free</code>和<code>WinDBG</code>完成逆向调试，不能使用其他的调试或者反编译工具，比如<code>Ghidra</code>、<code>IDA Pro</code>、<code>x32dbg</code>等。这一点很多人不喜欢，因为WinDBG的指令确实反人类，OffSec官方说这样要求是为了保证评分流程的流畅。</p>
<p>可以使用WinDBG的插件或者扩展，但需要在报告里说明其用途；可以使用漏洞利用编写框架，例如<code>pwntools</code>、<code>mona</code>等。</p>
<p>考试所写的脚本必须是<code>Python3</code>的，可以使用<code>Metasploit</code>社区版作为辅助。</p>
<p>另外要注意的是，<code>OSED</code>考试所需报告的要求也是有变化的，脚本需要单独作为文件而不是放在PDF中。</p>
<p>只要完成其中两个题目就可以通过考试，必须完全解决才能得分，不会给步骤分。</p>
<p>和<code>OSWE</code>类似，<code>OSED</code>考试同样严禁下载考试文件到本地。除非考试说明特别要求，即使这样也需要在考试结束时删除该文件。</p>
<h1 id="备考">备考</h1>
<p><code>EXP-301</code>的课程板块相对来说没那么多，主要就是这些：</p>
<ul>
<li>WinDbg使用介绍</li>
<li>基础堆栈溢出</li>
<li>SEH溢出</li>
<li>Egghunters</li>
<li>Custom Shellcode</li>
<li>DEP绕过</li>
<li>ASLR绕过</li>
<li>格式化字符串</li>
</ul>
<p>看了其他人的review以及考试说明，提到题目一般是3个类型：</p>
<ul>
<li>给Crash PoC的DEP Bypass，ROP必须多练，一定掌握熟</li>
<li>Custome Shellcode，会指定你需要通过哪个函数达成什么效果</li>
<li>对逆向能力要求高的压轴题</li>
</ul>
<p>压轴题都说很难，做出来的人不多，因为不做也能通过考试。</p>
<p>因为就剩最后一门了，所以有点松懈，加上备考中间遇到了春节，最终学习时间其实很少。</p>
<p>输人不输阵，还是约了3月8号的考试，要这么急匆匆考的原因还是，剩下的时间还想再学个OSMR（macOS上的本地提权及绕过操作系统防御机制）或者OSDA（安全分析师路径）的，必须狠狠榨取剩余价值。</p>
<p>根据剩余时间和考试内容的综合考虑，我选择放弃最后的压轴题，目标就是把前两个类型掌握熟练。</p>
<p><code>EXP-301</code>总共有三个challenge，第二个主要考察DEP绕过+ROP，第一个和第三个都需要一些逆向工作。因为时间和工作原因，没来得及做challenge，只能把课程材料多熟悉了几遍。</p>
<p>收集了一些有用的资源，包括review和工具：</p>
<ul>
<li><a href="https://red.0xbad53c.com/training-reviews/offensive-security/osed">https://red.0xbad53c.com/training-reviews/offensive-security/osed</a></li>
<li><a href="https://darkwing.moe/2022/10/07/OSED%E5%8F%97%E9%A8%93%E8%A8%98/">https://darkwing.moe/2022/10/07/OSED%E5%8F%97%E9%A8%93%E8%A8%98/</a></li>
<li><a href="https://github.com/epi052/osed-scripts">https://github.com/epi052/osed-scripts</a></li>
<li><a href="https://github.com/0xbad53c/osed-tools">https://github.com/0xbad53c/osed-tools</a></li>
<li><a href="https://github.com/nop-tech/OSED">https://github.com/nop-tech/OSED</a></li>
<li><a href="https://github.com/nop-tech/code_caver">https://github.com/nop-tech/code_caver</a></li>
</ul>
<p>还有一些额外的自制小练习，来自<code>@y4ng</code>师傅：</p>
<p><strong>自定义shellcode：</strong></p>
<ul>
<li>CreateProcess执行calc.exe</li>
<li>WinExec执行calc.exe</li>
<li>CreateServiceA创建一个服务</li>
<li>GetUserNameA + MessageboxA 弹出&quot;Hello 用户名&quot;</li>
<li>GetUserNameW + MessageboxW 弹出&quot;主机名 用户名&quot;</li>
</ul>
<p><strong>ROP:</strong></p>
<ul>
<li>github.com/xct/vulnbins</li>
<li>exploits/50472 10-Strike Network Inventory Explorer</li>
<li>exploits/17665 D.R. Software Audio Converter 8.1</li>
<li>exploits/44522 exploits/47411 Easy File Sharing Web Server 7.2</li>
<li>exploits/46269 Faleemi Desktop Software 1.8</li>
<li>exploits/50650 vuplayer 2.49</li>
<li>exploits/43156 VX Search 10.2.14</li>
</ul>
<h1 id="考试">考试</h1>
<p>毫不夸张地说，OSED是我目前遇到的最难的OffSec考试。</p>
<p>当天还出现个状况，进入监考平台后我没法看到监考员发的信息，我也发不出去信息，最后靠挂全局代理解决了。</p>
<p>题目要求写的很清楚，要求必须用什么以及不能用什么，另外就是记得提交时每道题只能交一个脚本，如果你有多个脚本就需要合并起来。</p>
<p>第一道是DEP Bypass+ROP题，期间踩坑无数，很多东西现查现学，不断冒出想放弃的念头。还好慢慢进入了状态，最终在考试开始后近30小时解决了它，而第二道自定义shellcode要相对简单一些，大概花了6个小时，做完就开始写报告，也写了5个多小时。</p>
<p>这次的报告也是最长的，写了近70页，把每个步骤和环节都尽量写的详细，然后提前6个小时结束考试并提交了报告，当时已经是凌晨五点，将近20个小时没休息，倒头就睡了。</p>
<p>对于考试，还有一些经验：</p>
<ol>
<li>ROP非常重要，练得越多，你的ROP就越熟练，遇到一些限制环境也能找到另外的构造思路</li>
<li>常见汇编指令要熟悉，不然想要实现某个功能却不知道用什么指令，那真是没地方哭</li>
<li>每种题目要针对性地多练练，常见的坑就能提前踩好</li>
<li>做好文档和脚本的管理，考试中我因为用混了没改的脚本导致浪费好长时间</li>
<li>有时候仅能用的gadget会有副作用，比如让你的堆栈产生各种变化，要学会怎么消除它们</li>
</ol>
<p>又是无比漫长的等待，这次等待的感觉已经接近于OSCP的那回，因为看到频道里很多人都是交报告24小时内就结果，整个人就是急急急。</p>
<figure data-type="image" tabindex="1"><img src="https://adan0s-1256533472.cos.ap-nanjing.myqcloud.com/uPic/20240313201643OITgKl1662521809258362.jpg" alt="20240313201643OITgKl1662521809258362" loading="lazy"></figure>
<p>还好这次速度也很快，大概在交完报告的第二天晚上就出了结果。当时的我正在和朋友聊天，手机突然传来叮的一声，这是推送软件的声音提醒，只有当考试结果通过时才会响起。</p>
<p>我愣了一下，才反应过来我已经通过了OSED，也就完成了获得OSCE3的最后一项认证。</p>
<p>近10个月的不断学习，我终于获得了<code>OffSec Certified Expert 3</code> (<code>OSCE3</code>)，这一刻真有种如释重负的感觉。突然就想起来刚开始学习OffSec证书时，在某个人的OSCP review里看到的一句话：<strong>这不是短跑，而是一场马拉松</strong>。</p>
<h1 id="小结">小结</h1>
<figure data-type="image" tabindex="2"><img src="https://adan0s-1256533472.cos.ap-nanjing.myqcloud.com/uPic/202403132017223wehbQimage.png" alt="202403132017223wehbQimage" loading="lazy"></figure>
<p>拿到OSCE3的电子证书后，还有一封邮件，是需要确认邮寄纸质证书及纪念币的地址，比较坑的是邮件里的链接点开就302，需要发邮件给他们的order部门处理下。</p>
<p>地址先填英文版的，等到了国内之后再改为中文版方便派送。证书会通过DHL寄送，基本是一批一批发的，最长需要两个月左右的时间，就慢慢等吧。</p>
<p>我的LU订阅还有两个月到期，争取把OSDA和OSMR也拿下，那这次的钱就花的太值辣😁</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E5%89%8D%E8%A8%80">前言</a></li>
<li><a href="#%E8%80%83%E8%AF%95%E8%A7%84%E5%88%99">考试规则</a></li>
<li><a href="#%E5%A4%87%E8%80%83">备考</a></li>
<li><a href="#%E8%80%83%E8%AF%95">考试</a></li>
<li><a href="#%E5%B0%8F%E7%BB%93">小结</a></li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://red-team.tips/post/2mrt_3sfo/">
              <h3 class="post-title">
                2023年终总结
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '971b65ce804f770e6019',
    clientSecret: 'a9fca4ca8deef880c5fac95e97fceb4edb23098a',
    repo: 'eviladan0s.github.io',
    owner: 'eviladan0s',
    admin: ['eviladan0s'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  
  <a class="rss" href="https://red-team.tips/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
